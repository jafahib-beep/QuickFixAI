Use this exact message to the agent — it tells them the minimum safe work to implement an MVP LiveAssist chat thread with image-attachments, step lists, and youtube link suggestions. Do the backend and frontend small changes, create staged diff, and do not commit until Jafar approves.

Goal: Implement a minimal LiveAssist conversation thread (MVP) so users can continue communicating with LiveAssist, upload additional images, receive step-by-step guides, and receive suggested YouTube links and tool suggestions. Keep changes minimal and safe. Do not commit — stage changes and produce a diff for review.

Requirements (backend):
1) Add session endpoints:
   - POST /api/liveassist/session
     Body: { "userId": "<id>" }
     Response: { "sessionId": "<uuid>" }
   - POST /api/liveassist/session/:sessionId/message
     Body: { "role": "user"|"system", "text": "...", "images": ["<url1>","<url2>"] }
     Response: proxied AI response (see format)

2) AI response schema (backend should return this JSON):
{
  "text": "Short assistant reply text",
  "steps": [
    { "id":"s1","text":"Power off and unplug", "detail":"Remove power cable and wait 30s", "tools":["flathead screwdriver"] },
    { "id":"s2","text":"Open case", "detail":"Remove 6 screws from panel A with #2 Philips", "tools":["#2 Phillips"] }
  ],
  "youtube_links": [
    { "title":"How to replace a CPU cooler", "url":"https://youtube.com/watch?v=xxxxx" }
  ],
  "images_to_show": ["<url>"], // optional: AI returned example images or annotated images
  "safety_warnings": ["Ensure power is off"]
}

3) Backend behavior:
   - When a message arrives, call the AI with a structured prompt that includes the session history and the uploaded images URLs.
   - Ask model to return JSON (strict) in the schema above.
   - Sanitize AI output; if JSON parse fails, fallback to plain text but mark as "unstructured".
   - Log request/response (for debugging) and return parsed JSON to frontend.

Requirements (frontend):
1) Add a LiveAssistThread component under the LiveAssist screen:
   - Shows message list (user message, assistant message).
   - Each assistant message can contain: text, checklist (steps with checkboxes), youtube links (as clickable cards), images (thumbnails).
   - Input box with: text input + image upload button (allow multiple images per message) + send button.
   - When user uploads images, upload to existing upload endpoint and send resulting URLs in POST /session/:id/message.

2) Checklist UX:
   - Each step displays `text` and a small chevron to expand `detail` (longer instructions).
   - Each step can show `tools` suggested (e.g., "#2 Phillips screwdriver") as chips.
   - Tapping a step toggles local check state and sends a small PATCH to backend to save progress (optional: `/session/:id/steps/:stepId`).

3) YouTube links:
   - If AI returns `youtube_links`, show them as cards with title and preview. Link opens in new tab.

Testing & deliverables:
1) Start dev server and demonstrate a sample session:
   - Create session, send a message with a test image URL, show returned JSON from AI and UI rendering.
2) Produce a staged diff file: `/tmp/liveassist-thread-diff.patch`.
   - Do NOT commit. Wait for Jafar’s approval.
3) Provide short README snippet (one paragraph) on how the backend constructs the AI prompt and which model/settings to use.

Prompt guidance for AI (backend should use this template):


System: You are LiveAssist, a step-by-step repair assistant. When given user text and image URLs, produce a JSON object with keys: text, steps[], youtube_links[], images_to_show[], safety_warnings[]. Steps must be clear, ordered, actionable. For each step suggest any tools (e.g., "Philips #2 screwdriver"). If helpful, include 1-3 YouTube links and short titles. Keep items concise. Do NOT give dangerous or illegal instructions.
User: {user_text}
Images: {image_urls}
History: {last_5_turns}


Security rules:
- Do not provide instructions that are unsafe (e.g., bypass safety, perform high-voltage electrical work). If the request is outside safe scope respond with safety_warnings and advise professional service.
- Do not return any hard-coded secret or demo tokens.

Please implement the minimal backend endpoints and a simple frontend LiveAssistThread rendering. Stage changes and produce `/tmp/liveassist-thread-diff.patch`. Provide example API call and the AI JSON response used to render the UI. Wait for Jafar’s explicit approval to commit.

Thank you.